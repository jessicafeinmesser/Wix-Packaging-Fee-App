import{_ as d}from"./chunk-XYIDODIB-kVuyCYlR.js";function u(){let n=null,t=null;return{promise:new Promise((e,o)=>{n=e,t=o}),resolve:n,reject:t}}var w=n=>{let{createHost:t}=n;return{__type:"host",create:e=>({}),host:e=>{var o,i;let{applicationId:a}=e??{},r=typeof window<"u"?window.wixEmbedsAPI:void 0,l=t(e),s=p();return{...l,apiBaseUrl:s,getMonitoringClient:r==null||r.getMonitoringClientFunction==null?void 0:r.getMonitoringClientFunction(a),essentials:{language:typeof window<"u"?(o=window.commonConfig)==null?void 0:o.language:void 0,locale:typeof window<"u"?(i=window.commonConfig)==null?void 0:i.locale:void 0}}},auth:e=>{let o=typeof window<"u"?window.wixEmbedsAPI:void 0;e||(e=o==null||o.getAccessTokenFunction==null?void 0:o.getAccessTokenFunction());let i=!1,{resolve:a,promise:r}=u();return{getAuthHeaders:async()=>{if(!e&&i&&(e=await r),!e)throw new Error("Failed to resolve auth token");return{headers:{Authorization:await e()}}},getAccessTokenInjector:()=>(i=!0,l=>{a(l)})}}}};function p(){let n=typeof window<"u"?window.wixEmbedsAPI:void 0,t=n==null||n.getExternalBaseUrl==null?void 0:n.getExternalBaseUrl();if(!t)return;let e=new URL(t);return e!=null&&e.pathname&&e.pathname!=="/"?""+e.hostname+e.pathname:e.hostname}var m=n=>{let{clientSdk:t,applicationId:e}=n;return{invoke:async o=>{let{namespace:i,method:a,args:r}=o;if(!t)throw new Error("Wix Site SDK only works in a Wix site environment. Learn more: https://dev.wix.com/docs/sdk/host-modules/site/introduction");return t.invoke({namespace:i,method:a,args:r,applicationId:e,accessToken:"accessToken"})},getAccessToken:()=>{throw new Error("Not implemented")},observeState:()=>({disconnect:()=>{}})}},h=function(n){let t=typeof $wixContext<"u"&&$wixContext.clientSdk||(n==null?void 0:n.clientSdk)||window.clientSdk,{applicationId:e}=n||{};if(!e)throw new Error('"createHost" was called without a required field "applicationId"');return{channel:m({clientSdk:t,applicationId:e}),close:()=>{}}},c=w({createHost:h}),v=n=>{let t=c.host({applicationId:n}),e=c.auth(),o=e.getAccessTokenInjector();return d({auth:e,host:t}).enableContext("module"),{injectGetAccessToken:o}};const{injectGetAccessToken:g}=v("1a153335-1edc-454a-b559-25698f94deec"),k=n=>{g(n)};export{k as injectAccessTokenFunction};
//# sourceMappingURL=_virtual_wix-context-module-CVZmBcsO.js.map
